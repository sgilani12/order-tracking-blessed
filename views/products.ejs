<!DOCTYPE html>

<html lang="en">

    <%- include('partials/head') %>

<body>
    <%- include('partials/topbar') %>
    <%- include('partials/side-nav') %>
    <div class="page-content">
    <h1>This is the products page</h1>
    

    <table class="table">
        <thead>
            <tr>
                <th>Product ID</th>
                <th>SKU</th>
                <th>Price</th>
                <th>Product_Name</th>
                <th>Quantity</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
                <!--object called customers loaded on page render -->
                <% if(products.length> 0){ %>

                    <% for ( var i=0 ; i < products.length ; i++){ %>
                        <tr>
                            <td>
                                <%= products[i].product_id%>
                            </td>
                            <td>
                                <%= products[i].SKU%>
                            </td>
                            <td>
                                <%= products[i].price%>
                            </td>
                            <td>
                                <%= products[i].product_name%>
                            </td>
                            <td>
                                <%= products[i].quantity%>
                            </td>
                            <td>
                                <%= products[i].description%>
                            </td>
                            <td>
                                <!--delete button, DELTE api call to /customers/:id-->
                                <!--let id = '<%- products[i].product_id%>';-->
                                <script>
                                    async function deleteProduct(id){
                                        let url = `/products/${id}`;
                                        confirm(`Deleting Product ${id}`);
                                        console.log(`endpoint to hit: ${url}`);
                                        const res = await axios.delete(url);
                                        console.log(`request status: ${res.status}`);                                  
                                    }

                                </script>
                                
                                <!--<a onClick="deleteProduct('<%- products[i].product_id%>')" href="">Delete</a>-->
                            </td>
                        </tr>
                        <% } %>

                            <% } %>
        </tbody>
        <tfoot></tfoot>
    </table>
</div>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</body>

</html>